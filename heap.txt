jconsole
-XX:+UseSerialGC -Xlog:gc*
Ќе ограничивал heap вручную, система выставила автоматическое ограничение в 4Gb.
ќчистки heap происход€т вне зависимости от того, были ли удалены объекты вручную,
подходим ли мы к лимиту heap, в общем - происход€т при любых действи€х.
ѕри удалении объектов Item использование пам€ти heap может возрасти.
“ак происходит потому, что в методах MemTracker мы так или иначе взаимодействуем с объектами Item,
а проверка на доступность ссылки происходит в момент заполнени€ частей heap.
»спользование heap растет со временем без использовани€ приложени€ (18Mb за 5 минут).
¬ставка единовременно большого количества Item (10млн) происходит без сбоев (heap - 2.5Gb).
”даление единовременно большого количества Item (10+млн) удивило программу - удаление не завершилось
даже через 5 минут.
-Xmx400m -Xms400m -XX:+UseSerialGC -Xlog:gc*
ќграничил пам€ть heap 400Mb.
“еперь при вставке большого количества Item (1млн) происходит одновременно очистка пам€ти (250Mb).
ѕри достижении лимита пам€ти и добавлении сверху еще объектов в панических попытках очитить heap
получил OutOfMemoryError
»спользование heap растет со временем без использовани€ приложени€ (18Mb за 5 минут). ќставил программе
запас в 5Mb до лимита и по достижении в режиме AFK лимита происходит самоочистка heap. Ќа большом
временном промежутке получетс€ пилообразный график использоани€ heap.
”дал€€ 2млн Item при запасе в 200Mb до лимита пам€ти происходит OutOfMemoryError.

