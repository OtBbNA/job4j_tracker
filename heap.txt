jconsole
-XX:+UseSerialGC -Xlog:gc*
Не ограничивал heap вручную, система выставила автоматическое ограничение в 4Gb.
Очистки heap происходят вне зависимости от того, были ли удалены объекты вручную,
подходим ли мы к лимиту heap, в общем - происходят при любых действиях.
При удалении объектов Item использование памяти heap может возрасти.
Так происходит потому, что в методах MemTracker мы так или иначе взаимодействуем с объектами Item,
а проверка на доступность ссылки происходит в момент заполнения частей heap.
Использование heap растет со временем без использования приложения (18Mb за 5 минут).
Вставка единовременно большого количества Item (10млн) происходит без сбоев (heap - 2.5Gb).
Удаление единовременно большого количества Item (10+млн) удивило программу - удаление не завершилось
даже через 5 минут.
-Xmx400m -Xms400m -XX:+UseSerialGC -Xlog:gc*
Ограничил память heap 400Mb.
Теперь при вставке большого количества Item (1млн) происходит одновременно очистка памяти (250Mb).
При достижении лимита памяти и добавлении сверху еще объектов в панических попытках очитить heap
получил OutOfMemoryError
Использование heap растет со временем без использования приложения (18Mb за 5 минут). Оставил программе
запас в 5Mb до лимита и по достижении в режиме AFK лимита происходит самоочистка heap. На большом
временном промежутке получется пилообразный график использоания heap.
Удаляя 2млн Item при запасе в 200Mb до лимита памяти происходит OutOfMemoryError.

